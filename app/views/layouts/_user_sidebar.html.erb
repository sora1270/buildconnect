<% if user_signed_in? %>
  <div class="col-md-3">
    <div class="card mb-3">
      <div class="card-body text-center">
        <% if current_user.profile_image.attached? %>
          <%= image_tag current_user.profile_image.variant(resize: "150x150"), class: 'img-thumbnail' %>
        <% else %>
          <%= image_tag 'no_image.jpg', size: "150x150", class: 'img-thumbnail' %>
        <% end %>
        <h3 class="mt-2"><%= current_user.full_name %></h3>
        <p class="text-muted"><%= current_user.company_name %></p>
        <p><%= current_user.email %></p>

        <!-- フォロー数とフォロワー数 -->
        <div class="mt-3">
          <%= link_to "フォロー数: #{current_user.followings.count}", followings_user_path(current_user), class: 'btn btn-primary btn-block' %>
        </div>
        <div class="mt-2">
          <%= link_to "フォロワー数: #{current_user.followers.count}", followers_user_path(current_user), class: 'btn btn-primary btn-block' %>
        </div>

        <!-- ユーザー編集ボタン -->
        <div class="mt-3">
          <%= link_to 'プロフィール編集', edit_user_registration_path, class: 'btn btn-primary btn-block' %>
        </div>
        
        <!-- アカウント削除ボタン -->
        <div class="mt-2">
          <%= button_to 'アカウント削除', registration_path(current_user), method: :delete, data: { confirm: '本当にアカウントを削除しますか？' }, class: 'btn btn-danger btn-block' %>
        </div>
      </div>
    </div>
  </div>
<% end %>